/*! For license information please see 738.0011a44c.chunk.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkbike_bus=globalThis.webpackChunkbike_bus||[]).push([[738],{738:(e,t,s)=>{s.r(t),s.d(t,{scopeCss:()=>B});const r="-shadowcsshost",o="-shadowcssslotted",n="-shadowcsscontext",c=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",l=new RegExp("("+r+c,"gim"),i=new RegExp("("+n+c,"gim"),a=new RegExp("("+o+c,"gim"),p=r+"-no-combinator",h=/-shadowcsshost-no-combinator([^\s]*)/,u=[/::shadow/g,/::content/g],g=/-shadowcsshost/gim,d=e=>new RegExp(`((?<!(^@supports(.*)))|(?<={.*))(${e}\\b)`,"gim"),m=d("::slotted"),$=d(":host"),f=d(":host-context"),x=/\/\*\s*[\s\S]*?\*\//g,_=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g,b=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,w=/([{}])/g,S=/(^.*?[^\\])??((:+)(.*)|$)/,v="%BLOCK%",k=(e,t)=>{const s=E(e);let r=0;return s.escapedString.replace(b,(function(){const e=arguments.length<=2?void 0:arguments[2];let o="",n=arguments.length<=4?void 0:arguments[4],c="";n&&n.startsWith("{"+v)&&(o=s.blocks[r++],n=n.substring(8),c="{");const l=t({selector:e,content:o});return`${arguments.length<=1?void 0:arguments[1]}${l.selector}${arguments.length<=3?void 0:arguments[3]}${c}${l.content}${n}`}))},E=e=>{const t=e.split(w),s=[],r=[];let o=0,n=[];for(let c=0;c<t.length;c++){const e=t[c];"}"===e&&o--,o>0?n.push(e):(n.length>0&&(r.push(n.join("")),s.push(v),n=[]),s.push(e)),"{"===e&&o++}n.length>0&&(r.push(n.join("")),s.push(v));return{escapedString:s.join(""),blocks:r}},W=(e,t,s)=>e.replace(t,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t[2]){const e=t[2].split(","),r=[];for(let o=0;o<e.length;o++){const n=e[o].trim();if(!n)break;r.push(s(p,n,t[3]))}return r.join(",")}return p+t[3]})),O=(e,t,s)=>e+t.replace(r,"")+s,R=(e,t,s)=>t.indexOf(r)>-1?O(e,t,s):e+t+s+", "+t+" "+e+s,j=(e,t)=>{const s=(e=>(e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")([>\\s~+[.,{:][\\s\\S]*)?$","m")))(t);return!s.test(e)},T=(e,t)=>e.replace(S,(function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+t+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")+(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"")})),C=(e,t,s)=>{const r="."+(t=t.replace(/\[is=([^\]]*)\]/g,(function(e){return arguments.length<=1?void 0:arguments[1]}))),o=e=>{let o=e.trim();if(!o)return"";if(e.indexOf(p)>-1)o=((e,t,s)=>{if(g.lastIndex=0,g.test(e)){const t=`.${s}`;return e.replace(h,((e,s)=>T(s,t))).replace(g,t+" ")}return t+" "+e})(e,t,s);else{const t=e.replace(g,"");t.length>0&&(o=T(t,r))}return o},n=(e=>{const t=[];let s=0;return{content:(e=e.replace(/(\[[^\]]*\])/g,((e,r)=>{const o=`__ph-${s}__`;return t.push(r),s++,o}))).replace(/(:nth-[-\w]+)(\([^)]+\))/g,((e,r,o)=>{const n=`__ph-${s}__`;return t.push(o),s++,r+n})),placeholders:t}})(e);let c,l="",i=0;const a=/( |>|\+|~(?!=))\s*/g;let u=!((e=n.content).indexOf(p)>-1);for(;null!==(c=a.exec(e));){const t=c[1],s=e.slice(i,c.index).trim();u=u||s.indexOf(p)>-1;l+=`${u?o(s):s} ${t} `,i=a.lastIndex}const d=e.substring(i);return u=u||d.indexOf(p)>-1,l+=u?o(d):d,m=n.placeholders,l.replace(/__ph-(\d+)__/g,((e,t)=>m[+t]));var m},L=(e,t,s,r,o)=>k(e,(e=>{let o=e.selector,n=e.content;"@"!==e.selector[0]?o=((e,t,s,r)=>e.split(",").map((e=>r&&e.indexOf("."+r)>-1?e.trim():j(e,t)?C(e,t,s).trim():e.trim())).join(", "))(e.selector,t,s,r):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(n=L(e.content,t,s,r));return{selector:o.replace(/\s{2,}/g," ").trim(),content:n}})),y=(e,t,s,c,h)=>{const g=((e,t)=>{const s="."+t+" > ",r=[];return e=e.replace(a,(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(t[2]){const e=t[2].trim(),o=t[3],n=s+e+o;let c="";for(let s=t[4]-1;s>=0;s--){const e=t[5][s];if("}"===e||","===e)break;c=e+c}const l=(c+n).trim(),i=`${c.trimEnd()}${n.trim()}`.trim();if(l!==i){const e=`${i}, ${l}`;r.push({orgSelector:l,updatedSelector:e})}return n}return p+t[3]})),{selectors:r,cssText:e}})(e=(e=>W(e,i,R))(e=(e=>W(e,l,O))(e=(e=>e.replace(f,`$1${n}`).replace($,`$1${r}`).replace(m,`$1${o}`))(e))),c);return e=(e=>u.reduce(((e,t)=>e.replace(t," ")),e))(e=g.cssText),t&&(e=L(e,t,s,c)),{cssText:(e=(e=A(e,s)).replace(/>\s*\*\s+([^{, ]+)/gm," $1 ")).trim(),slottedSelectors:g.selectors.map((e=>({orgSelector:A(e.orgSelector,s),updatedSelector:A(e.updatedSelector,s)})))}},A=(e,t)=>e.replace(/-shadowcsshost-no-combinator/g,`.${t}`),B=(e,t,s)=>{const r=t+"-h",o=t+"-s",n=e.match(_)||[];e=(e=>e.replace(x,""))(e);const c=[];if(s){const t=e=>{const t=`/*!@___${c.length}___*/`,s=`/*!@${e.selector}*/`;return c.push({placeholder:t,comment:s}),e.selector=t+e.selector,e};e=k(e,(e=>"@"!==e.selector[0]?t(e):e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document")?(e.content=k(e.content,t),e):e))}const l=y(e,t,r,o);return e=[l.cssText,...n].join("\n"),s&&c.forEach((t=>{let{placeholder:s,comment:r}=t;e=e.replace(s,r)})),l.slottedSelectors.forEach((t=>{const s=new RegExp(t.orgSelector.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");e=e.replace(s,t.updatedSelector)})),e}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFhM0csY0FDckM4RyxFQUFXLE9BQU10RyxFQUFLM0IsYUFHNUIsT0FGQThILEVBQWExRixLQUFLLENBQUU0RixjQUFhQyxZQUNqQ3RHLEVBQUszQixTQUFXZ0ksRUFBY3JHLEVBQUszQixTQUM1QjJCLENBQUksRUFFZlksRUFBVTdCLEVBQWE2QixHQUFVWixHQUNKLE1BQXJCQSxFQUFLM0IsU0FBUyxHQUNQK0gsRUFBeUJwRyxHQUUzQkEsRUFBSzNCLFNBQVN3QixXQUFXLFdBQzlCRyxFQUFLM0IsU0FBU3dCLFdBQVcsY0FDekJHLEVBQUszQixTQUFTd0IsV0FBVyxVQUN6QkcsRUFBSzNCLFNBQVN3QixXQUFXLGNBQ3pCRyxFQUFLTixRQUFVWCxFQUFhaUIsRUFBS04sUUFBUzBHLEdBQ25DcEcsR0FFSkEsR0FFZixDQUNBLE1BQU11RyxFQUFTcEMsRUFBYXZELEVBQVN3RCxFQUFTQyxFQUFhQyxHQVczRCxPQVZBMUQsRUFBVSxDQUFDMkYsRUFBTzNGLFdBQVlvRixHQUFrQnRGLEtBQUssTUFDakRzRCxHQUNBbUMsRUFBYUssU0FBUUMsSUFBOEIsSUFBN0IsWUFBRUosRUFBVyxRQUFFQyxHQUFTRyxFQUMxQzdGLEVBQVVBLEVBQVF0QixRQUFRK0csRUFBYUMsRUFBUSxJQUd2REMsRUFBT1YsaUJBQWlCVyxTQUFTMUIsSUFDN0IsTUFBTTRCLEVBQVEsSUFBSTdJLE9BQXFDaUgsRUFBZ0JHLFlBM2MvRDNGLFFBQVEsc0JBQXVCLFFBMmM4QyxLQUNyRnNCLEVBQVVBLEVBQVF0QixRQUFRb0gsRUFBTzVCLEVBQWdCTSxnQkFBZ0IsSUFFOUR4RSxDQUFPIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvc2hhZG93LWNzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuIFN0ZW5jaWwgQ2xpZW50IFBsYXRmb3JtIHY0LjkuMSB8IE1JVCBMaWNlbnNlZCB8IGh0dHBzOi8vc3RlbmNpbGpzLmNvbVxuICovXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdGhhdCB3aWxsIGVzY2FwZSBhbGwgcmVndWxhciBleHByZXNzaW9uIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gdGV4dCBUaGUgc3RyaW5nIHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgc3BlY2lhbCBjaGFyYWN0ZXJzLlxuICogQHJldHVybnMgVGhlIHN0cmluZyB3aXRoIGFsbCBzcGVjaWFsIGNoYXJhY3RlcnMgZXNjYXBlZC5cbiAqL1xuY29uc3QgZXNjYXBlUmVnRXhwU3BlY2lhbENoYXJhY3RlcnMgPSAodGV4dCkgPT4ge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICpcbiAqIFRoaXMgZmlsZSBpcyBhIHBvcnQgb2Ygc2hhZG93Q1NTIGZyb20gYHdlYmNvbXBvbmVudHMuanNgIHRvIFR5cGVTY3JpcHQuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vd2ViY29tcG9uZW50cy93ZWJjb21wb25lbnRzanMvYmxvYi80ZWZlY2Q3ZTBlL3NyYy9TaGFkb3dDU1MvU2hhZG93Q1NTLmpzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2NvbXBpbGVyL3NyYy9zaGFkb3dfY3NzLnRzXG4gKi9cbmNvbnN0IHNhZmVTZWxlY3RvciA9IChzZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IFtdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgLy8gUmVwbGFjZXMgYXR0cmlidXRlIHNlbGVjdG9ycyB3aXRoIHBsYWNlaG9sZGVycy5cbiAgICAvLyBUaGUgV1MgaW4gW2F0dHI9XCJ2YSBsdWVcIl0gd291bGQgb3RoZXJ3aXNlIGJlIGludGVycHJldGVkIGFzIGEgc2VsZWN0b3Igc2VwYXJhdG9yLlxuICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgvKFxcW1teXFxdXSpcXF0pL2csIChfLCBrZWVwKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VCeSA9IGBfX3BoLSR7aW5kZXh9X19gO1xuICAgICAgICBwbGFjZWhvbGRlcnMucHVzaChrZWVwKTtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VCeTtcbiAgICB9KTtcbiAgICAvLyBSZXBsYWNlcyB0aGUgZXhwcmVzc2lvbiBpbiBgOm50aC1jaGlsZCgybiArIDEpYCB3aXRoIGEgcGxhY2Vob2xkZXIuXG4gICAgLy8gV1MgYW5kIFwiK1wiIHdvdWxkIG90aGVyd2lzZSBiZSBpbnRlcnByZXRlZCBhcyBzZWxlY3RvciBzZXBhcmF0b3JzLlxuICAgIGNvbnN0IGNvbnRlbnQgPSBzZWxlY3Rvci5yZXBsYWNlKC8oOm50aC1bLVxcd10rKShcXChbXildK1xcKSkvZywgKF8sIHBzZXVkbywgZXhwKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VCeSA9IGBfX3BoLSR7aW5kZXh9X19gO1xuICAgICAgICBwbGFjZWhvbGRlcnMucHVzaChleHApO1xuICAgICAgICBpbmRleCsrO1xuICAgICAgICByZXR1cm4gcHNldWRvICsgcmVwbGFjZUJ5O1xuICAgIH0pO1xuICAgIGNvbnN0IHNzID0ge1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBwbGFjZWhvbGRlcnMsXG4gICAgfTtcbiAgICByZXR1cm4gc3M7XG59O1xuY29uc3QgcmVzdG9yZVNhZmVTZWxlY3RvciA9IChwbGFjZWhvbGRlcnMsIGNvbnRlbnQpID0+IHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlKC9fX3BoLShcXGQrKV9fL2csIChfLCBpbmRleCkgPT4gcGxhY2Vob2xkZXJzWytpbmRleF0pO1xufTtcbmNvbnN0IF9wb2x5ZmlsbEhvc3QgPSAnLXNoYWRvd2Nzc2hvc3QnO1xuY29uc3QgX3BvbHlmaWxsU2xvdHRlZCA9ICctc2hhZG93Y3Nzc2xvdHRlZCc7XG4vLyBub3RlOiA6aG9zdC1jb250ZXh0IHByZS1wcm9jZXNzZWQgdG8gLXNoYWRvd2Nzc2hvc3Rjb250ZXh0LlxuY29uc3QgX3BvbHlmaWxsSG9zdENvbnRleHQgPSAnLXNoYWRvd2Nzc2NvbnRleHQnO1xuY29uc3QgX3BhcmVuU3VmZml4ID0gJykoPzpcXFxcKCgnICsgJyg/OlxcXFwoW14pKF0qXFxcXCl8W14pKF0qKSs/JyArICcpXFxcXCkpPyhbXix7XSopJztcbmNvbnN0IF9jc3NDb2xvbkhvc3RSZSA9IG5ldyBSZWdFeHAoJygnICsgX3BvbHlmaWxsSG9zdCArIF9wYXJlblN1ZmZpeCwgJ2dpbScpO1xuY29uc3QgX2Nzc0NvbG9uSG9zdENvbnRleHRSZSA9IG5ldyBSZWdFeHAoJygnICsgX3BvbHlmaWxsSG9zdENvbnRleHQgKyBfcGFyZW5TdWZmaXgsICdnaW0nKTtcbmNvbnN0IF9jc3NDb2xvblNsb3R0ZWRSZSA9IG5ldyBSZWdFeHAoJygnICsgX3BvbHlmaWxsU2xvdHRlZCArIF9wYXJlblN1ZmZpeCwgJ2dpbScpO1xuY29uc3QgX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvciA9IF9wb2x5ZmlsbEhvc3QgKyAnLW5vLWNvbWJpbmF0b3InO1xuY29uc3QgX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvclJlID0gLy1zaGFkb3djc3Nob3N0LW5vLWNvbWJpbmF0b3IoW15cXHNdKikvO1xuY29uc3QgX3NoYWRvd0RPTVNlbGVjdG9yc1JlID0gWy86OnNoYWRvdy9nLCAvOjpjb250ZW50L2ddO1xuY29uc3QgX3NlbGVjdG9yUmVTdWZmaXggPSAnKFs+XFxcXHN+K1suLHs6XVtcXFxcc1xcXFxTXSopPyQnO1xuY29uc3QgX3BvbHlmaWxsSG9zdFJlID0gLy1zaGFkb3djc3Nob3N0L2dpbTtcbi8qKlxuICogTGl0dGxlIGhlbHBlciBmb3IgZ2VuZXJhdGluZyBhIHJlZ2V4IHRoYXQgd2lsbCBtYXRjaCBhIHNwZWNpZmllZFxuICogQ1NTIHNlbGVjdG9yIHdoZW4gdGhhdCBzZWxlY3RvciBpcyBfbm90XyBhIHBhcnQgb2YgYSBgQHN1cHBvcnRzYCBydWxlLlxuICpcbiAqIFRoZSBwYXR0ZXJuIHdpbGwgbWF0Y2ggdGhlIHByb3ZpZGVkIGBzZWxlY3RvcmAgKGkuZS4gJzpob3N0JywgJzpob3N0LWNvbnRleHQnLCBldGMuKVxuICogd2hlbiB0aGF0IHNlbGVjdG9yIGlzIG5vdCBhIHBhcnQgb2YgYSBgQHN1cHBvcnRzYCBzZWxlY3RvciBydWxlIF9vcl8gaWYgdGhlIHNlbGVjdG9yXG4gKiBpcyBhIHBhcnQgb2YgdGhlIHJ1bGUncyBkZWNsYXJhdGlvbi5cbiAqXG4gKiBGb3IgaW5zdGFuY2UsIGlmIHdlIGNyZWF0ZSB0aGUgcmVnZXggd2l0aCB0aGUgc2VsZWN0b3IgJzpob3N0LWNvbnRleHQnOlxuICogLSAnQHN1cHBvcnRzIHNlbGVjdG9yKDpob3N0LWNvbnRleHQoKSknIHdpbGwgcmV0dXJuIG5vIG1hdGNoZXMgKHN0YXJ0cyB3aXRoICdAc3VwcG9ydHMnKVxuICogLSAnQHN1cHBvcnRzIHNlbGVjdG9yKDpob3N0LWNvbnRleHQoKSkgeyA6aG9zdC1jb250ZXh0KCkgeyAuLi4gfX0nIHdpbGwgbWF0Y2ggdGhlIHNlY29uZCAnOmhvc3QtY29udGV4dCcgKHBhcnQgb2YgZGVjbGFyYXRpb24pXG4gKiAtICc6aG9zdC1jb250ZXh0KCkgeyAuLi4gfScgd2lsbCBtYXRjaCAnOmhvc3QtY29udGV4dCcgKHNlbGVjdG9yIGlzIG5vdCBhICdAc3VwcG9ydHMnIHJ1bGUpXG4gKiAtICc6aG9zdCgpIHsgLi4uIH0nIHdpbGwgcmV0dXJuIG5vIG1hdGNoZXMgKHNlbGVjdG9yIGRvZXNuJ3QgbWF0Y2ggc2VsZWN0b3IgdXNlZCB0byBjcmVhdGUgcmVnZXgpXG4gKlxuICogQHBhcmFtIHNlbGVjdG9yIFRoZSBDU1Mgc2VsZWN0b3Igd2Ugd2FudCB0byBtYXRjaCBmb3IgcmVwbGFjZW1lbnRcbiAqIEByZXR1cm5zIEEgbG9vay1iZWhpbmQgcmVnZXggY29udGFpbmluZyB0aGUgc2VsZWN0b3JcbiAqL1xuY29uc3QgY3JlYXRlU3VwcG9ydHNSdWxlUmUgPSAoc2VsZWN0b3IpID0+IG5ldyBSZWdFeHAoYCgoPzwhKF5Ac3VwcG9ydHMoLiopKSl8KD88PVxcey4qKSkoJHtzZWxlY3Rvcn1cXFxcYilgLCAnZ2ltJyk7XG5jb25zdCBfY29sb25TbG90dGVkUmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZSgnOjpzbG90dGVkJyk7XG5jb25zdCBfY29sb25Ib3N0UmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZSgnOmhvc3QnKTtcbmNvbnN0IF9jb2xvbkhvc3RDb250ZXh0UmUgPSBjcmVhdGVTdXBwb3J0c1J1bGVSZSgnOmhvc3QtY29udGV4dCcpO1xuY29uc3QgX2NvbW1lbnRSZSA9IC9cXC9cXCpcXHMqW1xcc1xcU10qP1xcKlxcLy9nO1xuY29uc3Qgc3RyaXBDb21tZW50cyA9IChpbnB1dCkgPT4ge1xuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKF9jb21tZW50UmUsICcnKTtcbn07XG5jb25zdCBfY29tbWVudFdpdGhIYXNoUmUgPSAvXFwvXFwqXFxzKiNcXHMqc291cmNlKE1hcHBpbmcpP1VSTD1bXFxzXFxTXSs/XFwqXFwvL2c7XG5jb25zdCBleHRyYWN0Q29tbWVudHNXaXRoSGFzaCA9IChpbnB1dCkgPT4ge1xuICAgIHJldHVybiBpbnB1dC5tYXRjaChfY29tbWVudFdpdGhIYXNoUmUpIHx8IFtdO1xufTtcbmNvbnN0IF9ydWxlUmUgPSAvKFxccyopKFteO1xce1xcfV0rPykoXFxzKikoKD86eyVCTE9DSyV9P1xccyo7Pyl8KD86XFxzKjspKS9nO1xuY29uc3QgX2N1cmx5UmUgPSAvKFt7fV0pL2c7XG5jb25zdCBfc2VsZWN0b3JQYXJ0c1JlID0gLyheLio/W15cXFxcXSk/PygoOispKC4qKXwkKS87XG5jb25zdCBPUEVOX0NVUkxZID0gJ3snO1xuY29uc3QgQ0xPU0VfQ1VSTFkgPSAnfSc7XG5jb25zdCBCTE9DS19QTEFDRUhPTERFUiA9ICclQkxPQ0slJztcbmNvbnN0IHByb2Nlc3NSdWxlcyA9IChpbnB1dCwgcnVsZUNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgaW5wdXRXaXRoRXNjYXBlZEJsb2NrcyA9IGVzY2FwZUJsb2NrcyhpbnB1dCk7XG4gICAgbGV0IG5leHRCbG9ja0luZGV4ID0gMDtcbiAgICByZXR1cm4gaW5wdXRXaXRoRXNjYXBlZEJsb2Nrcy5lc2NhcGVkU3RyaW5nLnJlcGxhY2UoX3J1bGVSZSwgKC4uLm0pID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBtWzJdO1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBsZXQgc3VmZml4ID0gbVs0XTtcbiAgICAgICAgbGV0IGNvbnRlbnRQcmVmaXggPSAnJztcbiAgICAgICAgaWYgKHN1ZmZpeCAmJiBzdWZmaXguc3RhcnRzV2l0aCgneycgKyBCTE9DS19QTEFDRUhPTERFUikpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBpbnB1dFdpdGhFc2NhcGVkQmxvY2tzLmJsb2Nrc1tuZXh0QmxvY2tJbmRleCsrXTtcbiAgICAgICAgICAgIHN1ZmZpeCA9IHN1ZmZpeC5zdWJzdHJpbmcoQkxPQ0tfUExBQ0VIT0xERVIubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBjb250ZW50UHJlZml4ID0gJ3snO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNzc1J1bGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RvcixcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bGUgPSBydWxlQ2FsbGJhY2soY3NzUnVsZSk7XG4gICAgICAgIHJldHVybiBgJHttWzFdfSR7cnVsZS5zZWxlY3Rvcn0ke21bM119JHtjb250ZW50UHJlZml4fSR7cnVsZS5jb250ZW50fSR7c3VmZml4fWA7XG4gICAgfSk7XG59O1xuY29uc3QgZXNjYXBlQmxvY2tzID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgaW5wdXRQYXJ0cyA9IGlucHV0LnNwbGl0KF9jdXJseVJlKTtcbiAgICBjb25zdCByZXN1bHRQYXJ0cyA9IFtdO1xuICAgIGNvbnN0IGVzY2FwZWRCbG9ja3MgPSBbXTtcbiAgICBsZXQgYnJhY2tldENvdW50ID0gMDtcbiAgICBsZXQgY3VycmVudEJsb2NrUGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBwYXJ0SW5kZXggPSAwOyBwYXJ0SW5kZXggPCBpbnB1dFBhcnRzLmxlbmd0aDsgcGFydEluZGV4KyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IGlucHV0UGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgaWYgKHBhcnQgPT09IENMT1NFX0NVUkxZKSB7XG4gICAgICAgICAgICBicmFja2V0Q291bnQtLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnJhY2tldENvdW50ID4gMCkge1xuICAgICAgICAgICAgY3VycmVudEJsb2NrUGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2tQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZEJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9ja1BhcnRzLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICByZXN1bHRQYXJ0cy5wdXNoKEJMT0NLX1BMQUNFSE9MREVSKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50QmxvY2tQYXJ0cyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0UGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydCA9PT0gT1BFTl9DVVJMWSkge1xuICAgICAgICAgICAgYnJhY2tldENvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN1cnJlbnRCbG9ja1BhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZXNjYXBlZEJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9ja1BhcnRzLmpvaW4oJycpKTtcbiAgICAgICAgcmVzdWx0UGFydHMucHVzaChCTE9DS19QTEFDRUhPTERFUik7XG4gICAgfVxuICAgIGNvbnN0IHN0ckVzY2FwZWRCbG9ja3MgPSB7XG4gICAgICAgIGVzY2FwZWRTdHJpbmc6IHJlc3VsdFBhcnRzLmpvaW4oJycpLFxuICAgICAgICBibG9ja3M6IGVzY2FwZWRCbG9ja3MsXG4gICAgfTtcbiAgICByZXR1cm4gc3RyRXNjYXBlZEJsb2Nrcztcbn07XG4vKipcbiAqIFJlcGxhY2VzIGNlcnRhaW4gc3RyaW5ncyB3aXRoaW4gdGhlIENTUyB3aXRoIHBsYWNlaG9sZGVyc1xuICogdGhhdCB3aWxsIGxhdGVyIGJlIHJlcGxhY2VkIHdpdGggY2xhc3Mgc2VsZWN0b3JzIGFwcHJvcHJpYXRlXG4gKiBmb3IgdGhlIGxldmVsIG9mIGVuY2Fwc3VsYXRpb24gKHNoYWRvdyBvciBzY29wZWQpLlxuICpcbiAqIFdoZW4gcGVyZm9ybWluZyB0aGVzZSByZXBsYWNlbWVudHMsIHdlIHdhbnQgdG8gaWdub3JlIHNlbGVjdG9ycyB0aGF0IGFyZSBhXG4gKiBwYXJ0IG9mIGFuIGBAc3VwcG9ydHNgIHJ1bGUuIFJlcGxhY2luZyB0aGVzZSBzZWxlY3RvcnMgd2lsbCByZXN1bHQgaW4gaW52YWxpZFxuICogQ1NTIHRoYXQgZ2V0cyBwYXNzZWQgdG8gYXV0b3ByZWZpeGVyL3Bvc3Rjc3Mgb25jZSB0aGUgcGxhY2Vob2xkZXJzIGFyZSByZXBsYWNlZC5cbiAqIEZvciBleGFtcGxlLCBhIHJ1bGUgbGlrZTpcbiAqXG4gKiBgYGBjc3NcbiAqIEBzdXBwb3J0cyBzZWxlY3Rvcig6aG9zdCgpKSB7XG4gKiAgIDpob3N0IHtcbiAqICAgICBjb2xvcjogcmVkO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBTaG91bGQgYmUgY29udmVydGVkIHRvOlxuICpcbiAqIGBgYGNzc1xuICogQHN1cHBvcnRzIHNlbGVjdG9yKDpob3N0KCkpIHtcbiAqICAgLXNoYWRvd2Nzc2hvc3Qge1xuICogICAgIGNvbG9yOiByZWQ7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBvcmRlciB0aGUgcmVnZXggcmVwbGFjZW1lbnRzIGhhcHBlbiBpbiBtYXR0ZXJzIHNpbmNlIHdlIG1hdGNoXG4gKiBhZ2FpbnN0IGEgd2hvbGUgc2VsZWN0b3Igd29yZCBzbyB3ZSBuZWVkIHRvIG1hdGNoIGFsbCBvZiBgOmhvc3QtY29udGV4dGBcbiAqIGJlZm9yZSB3ZSB0cnkgdG8gcmVwbGFjZSBgOmhvc3RgLiBPdGhlcndpc2UgdGhlIHBhdHRlcm4gZm9yIGA6aG9zdGAgd291bGQgbWF0Y2hcbiAqIGA6aG9zdC1jb250ZXh0YCByZXN1bHRpbmcgaW4gc29tZXRoaW5nIGxpa2UgYDotc2hhZG93Y3NzaG9zdC1jb250ZXh0YC5cbiAqXG4gKiBAcGFyYW0gY3NzVGV4dCBBIENTUyBzdHJpbmcgZm9yIGEgY29tcG9uZW50XG4gKiBAcmV0dXJucyBUaGUgbW9kaWZpZWQgQ1NTIHN0cmluZ1xuICovXG5jb25zdCBpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQgPSAoY3NzVGV4dCkgPT4ge1xuICAgIC8vIFRoZXNlIHJlcGxhY2VtZW50cyB1c2UgYSBzcGVjaWFsIHN5bnRheCB3aXRoIHRoZSBgJDFgLiBXaGVuIHRoZSByZXBsYWNlbWVudFxuICAgIC8vIG9jY3VycywgYCQxYCBtYXBzIHRvIHRoZSBjb250ZW50IG9mIHRoZSBzdHJpbmcgbGVhZGluZyB1cCB0byB0aGUgc2VsZWN0b3JcbiAgICAvLyB0byBiZSByZXBsYWNlZC5cbiAgICAvL1xuICAgIC8vIE90aGVyd2lzZSwgd2Ugd2lsbCByZXBsYWNlIGFsbCB0aGUgcHJlY2VkaW5nIGNvbnRlbnQgaW4gYWRkaXRpb24gdG8gdGhlXG4gICAgLy8gc2VsZWN0b3IgYmVjYXVzZSBvZiB0aGUgbG9va2JlaGluZCBpbiB0aGUgcmVnZXguXG4gICAgLy9cbiAgICAvLyBlLmcuIGAvKiFAX19fMF9fXyovOmhvc3Qge31gID0+IGAvKiFAX19fMF9fXyovLS1zaGFkb3djc3Nob3N0IHt9YFxuICAgIGNzc1RleHQgPSBjc3NUZXh0XG4gICAgICAgIC5yZXBsYWNlKF9jb2xvbkhvc3RDb250ZXh0UmUsIGAkMSR7X3BvbHlmaWxsSG9zdENvbnRleHR9YClcbiAgICAgICAgLnJlcGxhY2UoX2NvbG9uSG9zdFJlLCBgJDEke19wb2x5ZmlsbEhvc3R9YClcbiAgICAgICAgLnJlcGxhY2UoX2NvbG9uU2xvdHRlZFJlLCBgJDEke19wb2x5ZmlsbFNsb3R0ZWR9YCk7XG4gICAgcmV0dXJuIGNzc1RleHQ7XG59O1xuY29uc3QgY29udmVydENvbG9uUnVsZSA9IChjc3NUZXh0LCByZWdFeHAsIHBhcnRSZXBsYWNlcikgPT4ge1xuICAgIC8vIG1bMV0gPSA6aG9zdCgtY29udGV4dCksIG1bMl0gPSBjb250ZW50cyBvZiAoKSwgbVszXSByZXN0IG9mIHJ1bGVcbiAgICByZXR1cm4gY3NzVGV4dC5yZXBsYWNlKHJlZ0V4cCwgKC4uLm0pID0+IHtcbiAgICAgICAgaWYgKG1bMl0pIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbVsyXS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBwYXJ0c1tpXS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICByLnB1c2gocGFydFJlcGxhY2VyKF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsIHAsIG1bM10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByLmpvaW4oJywnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yICsgbVszXTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IGNvbG9uSG9zdFBhcnRSZXBsYWNlciA9IChob3N0LCBwYXJ0LCBzdWZmaXgpID0+IHtcbiAgICByZXR1cm4gaG9zdCArIHBhcnQucmVwbGFjZShfcG9seWZpbGxIb3N0LCAnJykgKyBzdWZmaXg7XG59O1xuY29uc3QgY29udmVydENvbG9uSG9zdCA9IChjc3NUZXh0KSA9PiB7XG4gICAgcmV0dXJuIGNvbnZlcnRDb2xvblJ1bGUoY3NzVGV4dCwgX2Nzc0NvbG9uSG9zdFJlLCBjb2xvbkhvc3RQYXJ0UmVwbGFjZXIpO1xufTtcbmNvbnN0IGNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXIgPSAoaG9zdCwgcGFydCwgc3VmZml4KSA9PiB7XG4gICAgaWYgKHBhcnQuaW5kZXhPZihfcG9seWZpbGxIb3N0KSA+IC0xKSB7XG4gICAgICAgIHJldHVybiBjb2xvbkhvc3RQYXJ0UmVwbGFjZXIoaG9zdCwgcGFydCwgc3VmZml4KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBob3N0ICsgcGFydCArIHN1ZmZpeCArICcsICcgKyBwYXJ0ICsgJyAnICsgaG9zdCArIHN1ZmZpeDtcbiAgICB9XG59O1xuY29uc3QgY29udmVydENvbG9uU2xvdHRlZCA9IChjc3NUZXh0LCBzbG90U2NvcGVJZCkgPT4ge1xuICAgIGNvbnN0IHNsb3RDbGFzcyA9ICcuJyArIHNsb3RTY29wZUlkICsgJyA+ICc7XG4gICAgY29uc3Qgc2VsZWN0b3JzID0gW107XG4gICAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZShfY3NzQ29sb25TbG90dGVkUmUsICguLi5tKSA9PiB7XG4gICAgICAgIGlmIChtWzJdKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb3VuZCA9IG1bMl0udHJpbSgpO1xuICAgICAgICAgICAgY29uc3Qgc3VmZml4ID0gbVszXTtcbiAgICAgICAgICAgIGNvbnN0IHNsb3R0ZWRTZWxlY3RvciA9IHNsb3RDbGFzcyArIGNvbXBvdW5kICsgc3VmZml4O1xuICAgICAgICAgICAgbGV0IHByZWZpeFNlbGVjdG9yID0gJyc7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbVs0XSAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IG1bNV1baV07XG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICd9JyB8fCBjaGFyID09PSAnLCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZWZpeFNlbGVjdG9yID0gY2hhciArIHByZWZpeFNlbGVjdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3JnU2VsZWN0b3IgPSAocHJlZml4U2VsZWN0b3IgKyBzbG90dGVkU2VsZWN0b3IpLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZGVkU2VsZWN0b3IgPSBgJHtwcmVmaXhTZWxlY3Rvci50cmltRW5kKCl9JHtzbG90dGVkU2VsZWN0b3IudHJpbSgpfWAudHJpbSgpO1xuICAgICAgICAgICAgaWYgKG9yZ1NlbGVjdG9yICE9PSBhZGRlZFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFNlbGVjdG9yID0gYCR7YWRkZWRTZWxlY3Rvcn0sICR7b3JnU2VsZWN0b3J9YDtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9yZ1NlbGVjdG9yLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkU2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2xvdHRlZFNlbGVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IgKyBtWzNdO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2VsZWN0b3JzLFxuICAgICAgICBjc3NUZXh0LFxuICAgIH07XG59O1xuY29uc3QgY29udmVydENvbG9uSG9zdENvbnRleHQgPSAoY3NzVGV4dCkgPT4ge1xuICAgIHJldHVybiBjb252ZXJ0Q29sb25SdWxlKGNzc1RleHQsIF9jc3NDb2xvbkhvc3RDb250ZXh0UmUsIGNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXIpO1xufTtcbmNvbnN0IGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnMgPSAoY3NzVGV4dCkgPT4ge1xuICAgIHJldHVybiBfc2hhZG93RE9NU2VsZWN0b3JzUmUucmVkdWNlKChyZXN1bHQsIHBhdHRlcm4pID0+IHJlc3VsdC5yZXBsYWNlKHBhdHRlcm4sICcgJyksIGNzc1RleHQpO1xufTtcbmNvbnN0IG1ha2VTY29wZU1hdGNoZXIgPSAoc2NvcGVTZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IGxyZSA9IC9cXFsvZztcbiAgICBjb25zdCBycmUgPSAvXFxdL2c7XG4gICAgc2NvcGVTZWxlY3RvciA9IHNjb3BlU2VsZWN0b3IucmVwbGFjZShscmUsICdcXFxcWycpLnJlcGxhY2UocnJlLCAnXFxcXF0nKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgc2NvcGVTZWxlY3RvciArICcpJyArIF9zZWxlY3RvclJlU3VmZml4LCAnbScpO1xufTtcbmNvbnN0IHNlbGVjdG9yTmVlZHNTY29waW5nID0gKHNlbGVjdG9yLCBzY29wZVNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgcmUgPSBtYWtlU2NvcGVNYXRjaGVyKHNjb3BlU2VsZWN0b3IpO1xuICAgIHJldHVybiAhcmUudGVzdChzZWxlY3Rvcik7XG59O1xuY29uc3QgaW5qZWN0U2NvcGluZ1NlbGVjdG9yID0gKHNlbGVjdG9yLCBzY29waW5nU2VsZWN0b3IpID0+IHtcbiAgICByZXR1cm4gc2VsZWN0b3IucmVwbGFjZShfc2VsZWN0b3JQYXJ0c1JlLCAoXywgYmVmb3JlID0gJycsIF9jb2xvbkdyb3VwLCBjb2xvbiA9ICcnLCBhZnRlciA9ICcnKSA9PiB7XG4gICAgICAgIHJldHVybiBiZWZvcmUgKyBzY29waW5nU2VsZWN0b3IgKyBjb2xvbiArIGFmdGVyO1xuICAgIH0pO1xufTtcbmNvbnN0IGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZSA9IChzZWxlY3Rvciwgc2NvcGVTZWxlY3RvciwgaG9zdFNlbGVjdG9yKSA9PiB7XG4gICAgLy8gSW4gQW5kcm9pZCBicm93c2VyLCB0aGUgbGFzdEluZGV4IGlzIG5vdCByZXNldCB3aGVuIHRoZSByZWdleCBpcyB1c2VkIGluIFN0cmluZy5yZXBsYWNlKClcbiAgICBfcG9seWZpbGxIb3N0UmUubGFzdEluZGV4ID0gMDtcbiAgICBpZiAoX3BvbHlmaWxsSG9zdFJlLnRlc3Qoc2VsZWN0b3IpKSB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VCeSA9IGAuJHtob3N0U2VsZWN0b3J9YDtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yXG4gICAgICAgICAgICAucmVwbGFjZShfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yUmUsIChfLCBzZWxlY3RvcikgPT4gaW5qZWN0U2NvcGluZ1NlbGVjdG9yKHNlbGVjdG9yLCByZXBsYWNlQnkpKVxuICAgICAgICAgICAgLnJlcGxhY2UoX3BvbHlmaWxsSG9zdFJlLCByZXBsYWNlQnkgKyAnICcpO1xuICAgIH1cbiAgICByZXR1cm4gc2NvcGVTZWxlY3RvciArICcgJyArIHNlbGVjdG9yO1xufTtcbmNvbnN0IGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZSA9IChzZWxlY3Rvciwgc2NvcGVTZWxlY3RvciwgaG9zdFNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgaXNSZSA9IC9cXFtpcz0oW15cXF1dKilcXF0vZztcbiAgICBzY29wZVNlbGVjdG9yID0gc2NvcGVTZWxlY3Rvci5yZXBsYWNlKGlzUmUsIChfLCAuLi5wYXJ0cykgPT4gcGFydHNbMF0pO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICcuJyArIHNjb3BlU2VsZWN0b3I7XG4gICAgY29uc3QgX3Njb3BlU2VsZWN0b3JQYXJ0ID0gKHApID0+IHtcbiAgICAgICAgbGV0IHNjb3BlZFAgPSBwLnRyaW0oKTtcbiAgICAgICAgaWYgKCFzY29wZWRQKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHAuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xKSB7XG4gICAgICAgICAgICBzY29wZWRQID0gYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKHAsIHNjb3BlU2VsZWN0b3IsIGhvc3RTZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgOmhvc3Qgc2luY2UgaXQgc2hvdWxkIGJlIHVubmVjZXNzYXJ5XG4gICAgICAgICAgICBjb25zdCB0ID0gcC5yZXBsYWNlKF9wb2x5ZmlsbEhvc3RSZSwgJycpO1xuICAgICAgICAgICAgaWYgKHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNjb3BlZFAgPSBpbmplY3RTY29waW5nU2VsZWN0b3IodCwgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcGVkUDtcbiAgICB9O1xuICAgIGNvbnN0IHNhZmVDb250ZW50ID0gc2FmZVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBzZWxlY3RvciA9IHNhZmVDb250ZW50LmNvbnRlbnQ7XG4gICAgbGV0IHNjb3BlZFNlbGVjdG9yID0gJyc7XG4gICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xuICAgIGxldCByZXM7XG4gICAgY29uc3Qgc2VwID0gLyggfD58XFwrfH4oPyE9KSlcXHMqL2c7XG4gICAgLy8gSWYgYSBzZWxlY3RvciBhcHBlYXJzIGJlZm9yZSA6aG9zdCBpdCBzaG91bGQgbm90IGJlIHNoaW1tZWQgYXMgaXRcbiAgICAvLyBtYXRjaGVzIG9uIGFuY2VzdG9yIGVsZW1lbnRzIGFuZCBub3Qgb24gZWxlbWVudHMgaW4gdGhlIGhvc3QncyBzaGFkb3dcbiAgICAvLyBgOmhvc3QtY29udGV4dChkaXYpYCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAgIC8vIGAtc2hhZG93Y3NzaG9zdC1uby1jb21iaW5hdG9yZGl2LCBkaXYgLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvcmBcbiAgICAvLyB0aGUgYGRpdmAgaXMgbm90IHBhcnQgb2YgdGhlIGNvbXBvbmVudCBpbiB0aGUgMm5kIHNlbGVjdG9ycyBhbmQgc2hvdWxkIG5vdCBiZSBzY29wZWQuXG4gICAgLy8gSGlzdG9yaWNhbGx5IGBjb21wb25lbnQtdGFnOmhvc3RgIHdhcyBtYXRjaGluZyB0aGUgY29tcG9uZW50IHNvIHdlIGFsc28gd2FudCB0byBwcmVzZXJ2ZVxuICAgIC8vIHRoaXMgYmVoYXZpb3IgdG8gYXZvaWQgYnJlYWtpbmcgbGVnYWN5IGFwcHMgKGl0IHNob3VsZCBub3QgbWF0Y2gpLlxuICAgIC8vIFRoZSBiZWhhdmlvciBzaG91bGQgYmU6XG4gICAgLy8gLSBgdGFnOmhvc3RgIC0+IGB0YWdbaF1gICh0aGlzIGlzIHRvIGF2b2lkIGJyZWFraW5nIGxlZ2FjeSBhcHBzLCBzaG91bGQgbm90IG1hdGNoIGFueXRoaW5nKVxuICAgIC8vIC0gYHRhZyA6aG9zdGAgLT4gYHRhZyBbaF1gIChgdGFnYCBpcyBub3Qgc2NvcGVkIGJlY2F1c2UgaXQncyBjb25zaWRlcmVkIHBhcnQgb2YgYVxuICAgIC8vICAgYDpob3N0LWNvbnRleHQodGFnKWApXG4gICAgY29uc3QgaGFzSG9zdCA9IHNlbGVjdG9yLmluZGV4T2YoX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvcikgPiAtMTtcbiAgICAvLyBPbmx5IHNjb3BlIHBhcnRzIGFmdGVyIHRoZSBmaXJzdCBgLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvcmAgd2hlbiBpdCBpcyBwcmVzZW50XG4gICAgbGV0IHNob3VsZFNjb3BlID0gIWhhc0hvc3Q7XG4gICAgd2hpbGUgKChyZXMgPSBzZXAuZXhlYyhzZWxlY3RvcikpICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IHJlc1sxXTtcbiAgICAgICAgY29uc3QgcGFydCA9IHNlbGVjdG9yLnNsaWNlKHN0YXJ0SW5kZXgsIHJlcy5pbmRleCkudHJpbSgpO1xuICAgICAgICBzaG91bGRTY29wZSA9IHNob3VsZFNjb3BlIHx8IHBhcnQuaW5kZXhPZihfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yKSA+IC0xO1xuICAgICAgICBjb25zdCBzY29wZWRQYXJ0ID0gc2hvdWxkU2NvcGUgPyBfc2NvcGVTZWxlY3RvclBhcnQocGFydCkgOiBwYXJ0O1xuICAgICAgICBzY29wZWRTZWxlY3RvciArPSBgJHtzY29wZWRQYXJ0fSAke3NlcGFyYXRvcn0gYDtcbiAgICAgICAgc3RhcnRJbmRleCA9IHNlcC5sYXN0SW5kZXg7XG4gICAgfVxuICAgIGNvbnN0IHBhcnQgPSBzZWxlY3Rvci5zdWJzdHJpbmcoc3RhcnRJbmRleCk7XG4gICAgc2hvdWxkU2NvcGUgPSBzaG91bGRTY29wZSB8fCBwYXJ0LmluZGV4T2YoX3BvbHlmaWxsSG9zdE5vQ29tYmluYXRvcikgPiAtMTtcbiAgICBzY29wZWRTZWxlY3RvciArPSBzaG91bGRTY29wZSA/IF9zY29wZVNlbGVjdG9yUGFydChwYXJ0KSA6IHBhcnQ7XG4gICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXJzIHdpdGggdGhlaXIgb3JpZ2luYWwgdmFsdWVzXG4gICAgcmV0dXJuIHJlc3RvcmVTYWZlU2VsZWN0b3Ioc2FmZUNvbnRlbnQucGxhY2Vob2xkZXJzLCBzY29wZWRTZWxlY3Rvcik7XG59O1xuY29uc3Qgc2NvcGVTZWxlY3RvciA9IChzZWxlY3Rvciwgc2NvcGVTZWxlY3RvclRleHQsIGhvc3RTZWxlY3Rvciwgc2xvdFNlbGVjdG9yKSA9PiB7XG4gICAgcmV0dXJuIHNlbGVjdG9yXG4gICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAoKHNoYWxsb3dQYXJ0KSA9PiB7XG4gICAgICAgIGlmIChzbG90U2VsZWN0b3IgJiYgc2hhbGxvd1BhcnQuaW5kZXhPZignLicgKyBzbG90U2VsZWN0b3IpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFsbG93UGFydC50cmltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yTmVlZHNTY29waW5nKHNoYWxsb3dQYXJ0LCBzY29wZVNlbGVjdG9yVGV4dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoc2hhbGxvd1BhcnQsIHNjb3BlU2VsZWN0b3JUZXh0LCBob3N0U2VsZWN0b3IpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFsbG93UGFydC50cmltKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuam9pbignLCAnKTtcbn07XG5jb25zdCBzY29wZVNlbGVjdG9ycyA9IChjc3NUZXh0LCBzY29wZVNlbGVjdG9yVGV4dCwgaG9zdFNlbGVjdG9yLCBzbG90U2VsZWN0b3IsIGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSA9PiB7XG4gICAgcmV0dXJuIHByb2Nlc3NSdWxlcyhjc3NUZXh0LCAocnVsZSkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0b3IgPSBydWxlLnNlbGVjdG9yO1xuICAgICAgICBsZXQgY29udGVudCA9IHJ1bGUuY29udGVudDtcbiAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JbMF0gIT09ICdAJykge1xuICAgICAgICAgICAgc2VsZWN0b3IgPSBzY29wZVNlbGVjdG9yKHJ1bGUuc2VsZWN0b3IsIHNjb3BlU2VsZWN0b3JUZXh0LCBob3N0U2VsZWN0b3IsIHNsb3RTZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKCdAbWVkaWEnKSB8fFxuICAgICAgICAgICAgcnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKCdAc3VwcG9ydHMnKSB8fFxuICAgICAgICAgICAgcnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKCdAcGFnZScpIHx8XG4gICAgICAgICAgICBydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0Bkb2N1bWVudCcpKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gc2NvcGVTZWxlY3RvcnMocnVsZS5jb250ZW50LCBzY29wZVNlbGVjdG9yVGV4dCwgaG9zdFNlbGVjdG9yLCBzbG90U2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNzc1J1bGUgPSB7XG4gICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpLnRyaW0oKSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjc3NSdWxlO1xuICAgIH0pO1xufTtcbmNvbnN0IHNjb3BlQ3NzVGV4dCA9IChjc3NUZXh0LCBzY29wZUlkLCBob3N0U2NvcGVJZCwgc2xvdFNjb3BlSWQsIGNvbW1lbnRPcmlnaW5hbFNlbGVjdG9yKSA9PiB7XG4gICAgY3NzVGV4dCA9IGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dChjc3NUZXh0KTtcbiAgICBjc3NUZXh0ID0gY29udmVydENvbG9uSG9zdChjc3NUZXh0KTtcbiAgICBjc3NUZXh0ID0gY29udmVydENvbG9uSG9zdENvbnRleHQoY3NzVGV4dCk7XG4gICAgY29uc3Qgc2xvdHRlZCA9IGNvbnZlcnRDb2xvblNsb3R0ZWQoY3NzVGV4dCwgc2xvdFNjb3BlSWQpO1xuICAgIGNzc1RleHQgPSBzbG90dGVkLmNzc1RleHQ7XG4gICAgY3NzVGV4dCA9IGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnMoY3NzVGV4dCk7XG4gICAgaWYgKHNjb3BlSWQpIHtcbiAgICAgICAgY3NzVGV4dCA9IHNjb3BlU2VsZWN0b3JzKGNzc1RleHQsIHNjb3BlSWQsIGhvc3RTY29wZUlkLCBzbG90U2NvcGVJZCk7XG4gICAgfVxuICAgIGNzc1RleHQgPSByZXBsYWNlU2hhZG93Q3NzSG9zdChjc3NUZXh0LCBob3N0U2NvcGVJZCk7XG4gICAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZSgvPlxccypcXCpcXHMrKFteeywgXSspL2dtLCAnICQxICcpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNzc1RleHQ6IGNzc1RleHQudHJpbSgpLFxuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlcGxhY2UgdGhlIHNoYWRvdyBDU1MgaG9zdCBzdHJpbmcgaW4gZWFjaCBvZiB0aGVzZSBzZWxlY3RvcnMgc2luY2Ugd2UgY3JlYXRlZFxuICAgICAgICAvLyB0aGVtIHByaW9yIHRvIHRoZSByZXBsYWNlbWVudCBoYXBwZW5pbmcgaW4gdGhlIGNvbXBvbmVudHMgQ1NTIHRleHQuXG4gICAgICAgIHNsb3R0ZWRTZWxlY3RvcnM6IHNsb3R0ZWQuc2VsZWN0b3JzLm1hcCgocmVmKSA9PiAoe1xuICAgICAgICAgICAgb3JnU2VsZWN0b3I6IHJlcGxhY2VTaGFkb3dDc3NIb3N0KHJlZi5vcmdTZWxlY3RvciwgaG9zdFNjb3BlSWQpLFxuICAgICAgICAgICAgdXBkYXRlZFNlbGVjdG9yOiByZXBsYWNlU2hhZG93Q3NzSG9zdChyZWYudXBkYXRlZFNlbGVjdG9yLCBob3N0U2NvcGVJZCksXG4gICAgICAgIH0pKSxcbiAgICB9O1xufTtcbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgcmVwbGFjZXMgdGhlIGludGVyaW0gc3RyaW5nIHJlcHJlc2VudGluZyBhIGA6aG9zdGAgc2VsZWN0b3Igd2l0aFxuICogdGhlIGhvc3Qgc2NvcGUgc2VsZWN0b3IgY2xhc3MgZm9yIHRoZSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSBjc3NUZXh0IFRoZSBDU1Mgc3RyaW5nIHRvIG1ha2UgdGhlIHJlcGxhY2VtZW50IGluXG4gKiBAcGFyYW0gaG9zdFNjb3BlSWQgVGhlIHNjb3BlIElEIHRoYXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBjbGFzcyByZXByZXNlbnRpbmcgdGhlIGhvc3QgZWxlbWVudFxuICogQHJldHVybnMgQ1NTIHdpdGggdGhlIHNlbGVjdG9yIHJlcGxhY2VkXG4gKi9cbmNvbnN0IHJlcGxhY2VTaGFkb3dDc3NIb3N0ID0gKGNzc1RleHQsIGhvc3RTY29wZUlkKSA9PiB7XG4gICAgcmV0dXJuIGNzc1RleHQucmVwbGFjZSgvLXNoYWRvd2Nzc2hvc3Qtbm8tY29tYmluYXRvci9nLCBgLiR7aG9zdFNjb3BlSWR9YCk7XG59O1xuY29uc3Qgc2NvcGVDc3MgPSAoY3NzVGV4dCwgc2NvcGVJZCwgY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpID0+IHtcbiAgICBjb25zdCBob3N0U2NvcGVJZCA9IHNjb3BlSWQgKyAnLWgnO1xuICAgIGNvbnN0IHNsb3RTY29wZUlkID0gc2NvcGVJZCArICctcyc7XG4gICAgY29uc3QgY29tbWVudHNXaXRoSGFzaCA9IGV4dHJhY3RDb21tZW50c1dpdGhIYXNoKGNzc1RleHQpO1xuICAgIGNzc1RleHQgPSBzdHJpcENvbW1lbnRzKGNzc1RleHQpO1xuICAgIGNvbnN0IG9yZ1NlbGVjdG9ycyA9IFtdO1xuICAgIGlmIChjb21tZW50T3JpZ2luYWxTZWxlY3Rvcikge1xuICAgICAgICBjb25zdCBwcm9jZXNzQ29tbWVudGVkU2VsZWN0b3IgPSAocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBgLyohQF9fXyR7b3JnU2VsZWN0b3JzLmxlbmd0aH1fX18qL2A7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50ID0gYC8qIUAke3J1bGUuc2VsZWN0b3J9Ki9gO1xuICAgICAgICAgICAgb3JnU2VsZWN0b3JzLnB1c2goeyBwbGFjZWhvbGRlciwgY29tbWVudCB9KTtcbiAgICAgICAgICAgIHJ1bGUuc2VsZWN0b3IgPSBwbGFjZWhvbGRlciArIHJ1bGUuc2VsZWN0b3I7XG4gICAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgY3NzVGV4dCA9IHByb2Nlc3NSdWxlcyhjc3NUZXh0LCAocnVsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JbMF0gIT09ICdAJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9jZXNzQ29tbWVudGVkU2VsZWN0b3IocnVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChydWxlLnNlbGVjdG9yLnN0YXJ0c1dpdGgoJ0BtZWRpYScpIHx8XG4gICAgICAgICAgICAgICAgcnVsZS5zZWxlY3Rvci5zdGFydHNXaXRoKCdAc3VwcG9ydHMnKSB8fFxuICAgICAgICAgICAgICAgIHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aCgnQHBhZ2UnKSB8fFxuICAgICAgICAgICAgICAgIHJ1bGUuc2VsZWN0b3Iuc3RhcnRzV2l0aCgnQGRvY3VtZW50JykpIHtcbiAgICAgICAgICAgICAgICBydWxlLmNvbnRlbnQgPSBwcm9jZXNzUnVsZXMocnVsZS5jb250ZW50LCBwcm9jZXNzQ29tbWVudGVkU2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBzY29wZWQgPSBzY29wZUNzc1RleHQoY3NzVGV4dCwgc2NvcGVJZCwgaG9zdFNjb3BlSWQsIHNsb3RTY29wZUlkKTtcbiAgICBjc3NUZXh0ID0gW3Njb3BlZC5jc3NUZXh0LCAuLi5jb21tZW50c1dpdGhIYXNoXS5qb2luKCdcXG4nKTtcbiAgICBpZiAoY29tbWVudE9yaWdpbmFsU2VsZWN0b3IpIHtcbiAgICAgICAgb3JnU2VsZWN0b3JzLmZvckVhY2goKHsgcGxhY2Vob2xkZXIsIGNvbW1lbnQgfSkgPT4ge1xuICAgICAgICAgICAgY3NzVGV4dCA9IGNzc1RleHQucmVwbGFjZShwbGFjZWhvbGRlciwgY29tbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzY29wZWQuc2xvdHRlZFNlbGVjdG9ycy5mb3JFYWNoKChzbG90dGVkU2VsZWN0b3IpID0+IHtcbiAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cFNwZWNpYWxDaGFyYWN0ZXJzKHNsb3R0ZWRTZWxlY3Rvci5vcmdTZWxlY3RvciksICdnJyk7XG4gICAgICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UocmVnZXgsIHNsb3R0ZWRTZWxlY3Rvci51cGRhdGVkU2VsZWN0b3IpO1xuICAgIH0pO1xuICAgIHJldHVybiBjc3NUZXh0O1xufTtcblxuZXhwb3J0IHsgc2NvcGVDc3MgfTtcbiJdLCJuYW1lcyI6WyJfcG9seWZpbGxIb3N0IiwiX3BvbHlmaWxsU2xvdHRlZCIsIl9wb2x5ZmlsbEhvc3RDb250ZXh0IiwiX3BhcmVuU3VmZml4IiwiX2Nzc0NvbG9uSG9zdFJlIiwiUmVnRXhwIiwiX2Nzc0NvbG9uSG9zdENvbnRleHRSZSIsIl9jc3NDb2xvblNsb3R0ZWRSZSIsIl9wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IiLCJfcG9seWZpbGxIb3N0Tm9Db21iaW5hdG9yUmUiLCJfc2hhZG93RE9NU2VsZWN0b3JzUmUiLCJfcG9seWZpbGxIb3N0UmUiLCJjcmVhdGVTdXBwb3J0c1J1bGVSZSIsInNlbGVjdG9yIiwiX2NvbG9uU2xvdHRlZFJlIiwiX2NvbG9uSG9zdFJlIiwiX2NvbG9uSG9zdENvbnRleHRSZSIsIl9jb21tZW50UmUiLCJfY29tbWVudFdpdGhIYXNoUmUiLCJfcnVsZVJlIiwiX2N1cmx5UmUiLCJfc2VsZWN0b3JQYXJ0c1JlIiwiQkxPQ0tfUExBQ0VIT0xERVIiLCJwcm9jZXNzUnVsZXMiLCJpbnB1dCIsInJ1bGVDYWxsYmFjayIsImlucHV0V2l0aEVzY2FwZWRCbG9ja3MiLCJlc2NhcGVCbG9ja3MiLCJuZXh0QmxvY2tJbmRleCIsImVzY2FwZWRTdHJpbmciLCJyZXBsYWNlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29udGVudCIsInN1ZmZpeCIsImNvbnRlbnRQcmVmaXgiLCJzdGFydHNXaXRoIiwiYmxvY2tzIiwic3Vic3RyaW5nIiwicnVsZSIsImlucHV0UGFydHMiLCJzcGxpdCIsInJlc3VsdFBhcnRzIiwiZXNjYXBlZEJsb2NrcyIsImJyYWNrZXRDb3VudCIsImN1cnJlbnRCbG9ja1BhcnRzIiwicGFydEluZGV4IiwicGFydCIsInB1c2giLCJqb2luIiwiY29udmVydENvbG9uUnVsZSIsImNzc1RleHQiLCJyZWdFeHAiLCJwYXJ0UmVwbGFjZXIiLCJfbGVuIiwibSIsIkFycmF5IiwiX2tleSIsInBhcnRzIiwiciIsImkiLCJwIiwidHJpbSIsImNvbG9uSG9zdFBhcnRSZXBsYWNlciIsImhvc3QiLCJjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyIiwiaW5kZXhPZiIsInNlbGVjdG9yTmVlZHNTY29waW5nIiwic2NvcGVTZWxlY3RvciIsInJlIiwibWFrZVNjb3BlTWF0Y2hlciIsInRlc3QiLCJpbmplY3RTY29waW5nU2VsZWN0b3IiLCJzY29waW5nU2VsZWN0b3IiLCJfIiwiYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlIiwiaG9zdFNlbGVjdG9yIiwiY2xhc3NOYW1lIiwiX3Njb3BlU2VsZWN0b3JQYXJ0Iiwic2NvcGVkUCIsImFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZSIsImxhc3RJbmRleCIsInJlcGxhY2VCeSIsInQiLCJzYWZlQ29udGVudCIsInBsYWNlaG9sZGVycyIsImluZGV4Iiwia2VlcCIsInBzZXVkbyIsImV4cCIsInNhZmVTZWxlY3RvciIsInJlcyIsInNjb3BlZFNlbGVjdG9yIiwic3RhcnRJbmRleCIsInNlcCIsInNob3VsZFNjb3BlIiwiZXhlYyIsInNlcGFyYXRvciIsInNsaWNlIiwicmVzdG9yZVNhZmVTZWxlY3RvciIsInNjb3BlU2VsZWN0b3JzIiwic2NvcGVTZWxlY3RvclRleHQiLCJzbG90U2VsZWN0b3IiLCJjb21tZW50T3JpZ2luYWxTZWxlY3RvciIsIm1hcCIsInNoYWxsb3dQYXJ0Iiwic2NvcGVDc3NUZXh0Iiwic2NvcGVJZCIsImhvc3RTY29wZUlkIiwic2xvdFNjb3BlSWQiLCJzbG90dGVkIiwiY29udmVydENvbG9uU2xvdHRlZCIsInNsb3RDbGFzcyIsInNlbGVjdG9ycyIsIl9sZW4yIiwiX2tleTIiLCJjb21wb3VuZCIsInNsb3R0ZWRTZWxlY3RvciIsInByZWZpeFNlbGVjdG9yIiwiY2hhciIsIm9yZ1NlbGVjdG9yIiwiYWRkZWRTZWxlY3RvciIsInRyaW1FbmQiLCJ1cGRhdGVkU2VsZWN0b3IiLCJjb252ZXJ0Q29sb25Ib3N0Q29udGV4dCIsImNvbnZlcnRDb2xvbkhvc3QiLCJpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQiLCJyZWR1Y2UiLCJyZXN1bHQiLCJwYXR0ZXJuIiwiY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyIsInJlcGxhY2VTaGFkb3dDc3NIb3N0Iiwic2xvdHRlZFNlbGVjdG9ycyIsInJlZiIsInNjb3BlQ3NzIiwiY29tbWVudHNXaXRoSGFzaCIsIm1hdGNoIiwic3RyaXBDb21tZW50cyIsIm9yZ1NlbGVjdG9ycyIsInByb2Nlc3NDb21tZW50ZWRTZWxlY3RvciIsInBsYWNlaG9sZGVyIiwiY29tbWVudCIsInNjb3BlZCIsImZvckVhY2giLCJfcmVmIiwicmVnZXgiXSwic291cmNlUm9vdCI6IiJ9